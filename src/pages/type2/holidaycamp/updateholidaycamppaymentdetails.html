<ion-header *ngIf="themeType == 1">
    <ion-navbar>
        <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
        <ion-title>Update Payment Details</ion-title>
        <ion-buttons end>
            <button ion-button icon-only (click)="presentPopover($event)"> 
        <ion-icon name="more"></ion-icon>
      </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>
<ion-header>
    <ion-navbar *ngIf="themeType == 2">
        <button ion-button icon-only menuToggle (click)="goToDashboardMenuPage()">
      <ion-icon name="apps"></ion-icon>
    </button>
        <ion-title>
            Update Payment Details
        </ion-title>
        <ion-buttons end>
            <button ion-button icon-only (click)="goToDashboardMenuPage()">
                 <img src="assets/images/home.svg" class="home_btn">
            </button>
            <button ion-button icon-only (click)="presentPopover($event)"> 
        <ion-icon name="more"></ion-icon>
      </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>


<ion-content class="cards-bg social-cards" padding>
    <div style="margin-bottom: 150px !important">
        <ion-slides pager="false" #myslider (ionSlideDidChange)="slideChanged()">
            <ion-slide *ngIf="enrolledUsersForCamp.length > 0" >
                <div *ngFor="let enrol_member of enrolledUsersForCamp;let i=index;">
                    <ion-card class="main_card">
                        <ion-card-content (click)="presentActionSheet(i)">
                            <ion-row>
                                <ion-col col-10 style="margin: auto;">
                                    <p style="text-align:left;">{{enrol_member.FirstName}} {{enrol_member.LastName}}</p>
                                </ion-col>
                                <ion-col col-2 style="margin: auto;text-align: right">
                                    <ion-icon name="ios-arrow-forward" style="text-align:right;font-size: 1.4em;"></ion-icon>
                                </ion-col>
                            </ion-row>
                        </ion-card-content>
                    </ion-card> 
                    <div *ngIf="user_pv_transactions.length > 0 && user_index == i">
                        <h3 style="text-align: left;color: rgba(0, 0, 0, 0.65) !important;margin: 10px 5px 10px 15px !important;font-size: 2 rem !important">Select sessions to update</h3>
                        <ion-card class="session_card" [ngClass]="{'selected':user_txn.is_select}" *ngFor="let user_txn of user_pv_transactions;let i=index;" (click)="selectTransaction(i)">
                            <ion-row>
                                <ion-col col-8 style="margin: auto;">
                                    <p *ngFor="let session of user_txn.enrollments">{{session.session_name}} ({{session.session_date}})</p>
                                </ion-col>
                                <ion-col col-4 style="margin:auto">
                                    <div *ngIf="user_txn.payment_status =='pending_verification'">
                                        <p style="font-weight:400 !important;font-size:18px !important;color:red">Unverified</p>
                                        <!-- <p style="font-weight:400 !important;font-size:18px !important">Paid By</p> -->
                                        <p>{{user_txn.paid_by_text}}</p>
                                        <p style="font-weight:400 !important;font-size:16 !important">{{user_txn.transaction_date}}</p>
                                    </div>
                                    <div *ngIf="user_txn.payment_status =='due'">
                                        <p style="font-weight:500 !important;font-size:20 !important">Due</p>
                                    </div>
                                </ion-col>
                                <!-- <ion-icon name="ios-checkmark-circle-outline" *ngIf="user_txn.is_select" class="card_icon"></ion-icon> -->
                            </ion-row>
                        </ion-card>
                    </div>
                </div> 
            </ion-slide>
            <ion-slide>
                <ion-card class="card">
                    <ion-card-content text-left>
                        <p style="font-size:20px">
                            <span *ngIf="selected_user!=undefined">{{selected_user.FirstName}} {{selected_user.LastName}}</span> 
                        </p>
                        <p style="font-size:18px">{{holidayCampDetails.camp_name}}</p>

                        <div *ngIf="selected_user">
                            <p *ngIf="selected_user.invoice_amount!=selected_user.amount_paid && selected_user.amount_paid>0" style="color:red">* discounts/multiple members paid together</p>
                        </div>
                        
                    </ion-card-content>
                </ion-card>
                <ion-item>
                    <ion-label floating>Payment Amount</ion-label>
                    <ion-input type="number" [(ngModel)]="paymentDetails.PaymentAmount" [disabled]="this.is_paid"></ion-input>
                </ion-item>
                <ion-item *ngIf="paymentDetails.PaymentMode=='1'">
                    <ion-label>Payment Mode</ion-label>
                    <ion-select [(ngModel)]="paymentDetails.PaymentMode" [disabled]="this.is_paid">
                        <ion-option value="0">Cash</ion-option>
                        <ion-option value="1">Online</ion-option>
                        <ion-option value="2">BACS</ion-option>
                        <ion-option value="3">Childcare Voucher</ion-option>
                        <ion-option value='4'>Wallet</ion-option>
                    </ion-select>
                </ion-item>

                <ion-item *ngIf="paymentDetails.PaymentMode!='1'">
                    <ion-label>Payment Mode</ion-label>
                    <ion-select [(ngModel)]="paymentDetails.PaymentMode" [disabled]="this.is_paid">
                        <ion-option value="0">Cash</ion-option>
                        <ion-option value="2">BACS</ion-option>
                        <ion-option value="3">Childcare Voucher</ion-option>
                        <ion-option value='4'>Wallet</ion-option>
                    </ion-select>
                </ion-item>
            
                <!-- <ion-item *ngIf="paymentDetails.PaymentStatus=='3'">
                    <ion-label>Payment Status</ion-label>
                    <ion-select [(ngModel)]="paymentDetails.PaymentStatus" [disabled]="this.is_paid">
                        <ion-option value="3">Pending Verification</ion-option>
                        <ion-option value="1">Paid</ion-option>
                    </ion-select>
                </ion-item> -->

                <ion-item>
                    <ion-label>Payment Status</ion-label>
                    <ion-select [(ngModel)]="paymentDetails.PaymentStatus" [disabled]="this.is_paid">
                        <ion-option value="1">Paid</ion-option>
                    </ion-select>
                </ion-item>

                <ion-item>
                    <ion-label floating>Comments</ion-label>
                    <ion-input type="text" [(ngModel)]="paymentDetails.Comments" [disabled]="this.is_paid"></ion-input>
                </ion-item>
                <ion-grid>
                    <ion-row>
                        <ion-col col-6>
                            <button ion-button block style="background-color:#2b92bb !important; color: white !important" (click)="cancel()">Cancel</button>
                        </ion-col>
                        <ion-col col-6>
                            <button ion-button block class="timekare-primary-btn" (click)="updatePaymentInfo()" [disabled]="this.is_paid">Update</button>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </ion-slide>
        </ion-slides>
    </div>
</ion-content>

<ion-footer *ngIf="can_show_update_btn && slide_index==0">
    <ion-row>
        <!-- <ion-col col-2 text-center class="margin_auto" >
            <button ion-button (click)="GotoPrevious()" ion-button block class="timekare-primary-btn">
                <ion-icon name="ios-arrow-back"></ion-icon>
            </button>
        </ion-col> -->
        <ion-col col-12 text-center class="margin_auto">
            <button ion-button block class="timekare-primary-btn"
                (click)="continuePayment()">Continue</button>
        </ion-col>
    </ion-row>
</ion-footer>