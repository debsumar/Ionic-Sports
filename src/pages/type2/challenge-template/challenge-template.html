<!--
  Generated template for the ChallengeTemplatePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Challenges & Templates</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <ion-row class="choose-row top-row">
    <ion-col col-6>
      <button ion-button class="select-type" (click)="changeType(true)"
        [class.selected]="selectedType">Challenges</button>
    </ion-col>
    <ion-col col-6>
      <button ion-button class="select-type" (click)="changeType(false)"
        [class.selected]="!selectedType">Templates</button>
    </ion-col>
  </ion-row>

  <ion-row>
    <ion-col col-12>
      <ion-item *ngIf="activityList.length > 0" style="padding-left:0px !important">
        <!-- <ion-label>Activity</ion-label> -->
        <ion-select [(ngModel)]="selectedActivity" (ionChange)="onChangeActivity()">
          <ion-option *ngFor="let activity of activityList" value={{activity.Key}}>{{activity.ActivityName}}
          </ion-option>
        </ion-select>
      </ion-item>
    </ion-col>
  </ion-row>

  <div *ngIf="selectedType">
    <ion-row class="sub-container rows-allign2">
      <ion-col col-1 style="text-align:center;margin:auto;padding:0px">
        <ion-icon name="ios-search"></ion-icon>
      </ion-col>
      <ion-col col-11 class="search-bar">
        <ion-searchbar placeholder="Search Challenges" id="customsearchbar" (ionInput)="FilterChallenges($event)"
          autocorrect="off"></ion-searchbar>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-12>
        <ion-list>
          <ion-card class="facilityCard seession-cards" style="border-radius:0px !important;"
            *ngFor="let challenge of Challenges;let i=index">
            <ion-card-content (click)="showActions('challenge',challenge)">
              <ion-row>
                <ion-col col-8>
                  <!-- <p class="p1 age">5 - 6 Years</p> -->
                  <!-- <p class="p1 age">{{challenge.AgeFrom}} - {{challenge.AgeTo}} Years</p> -->
                  <p class="p1">{{challenge.ChallengeName}} </p>
                  <p class="paidmembercount">Level: {{challenge.Levels.length}}</p>
                </ion-col>
                <ion-col col-4 class="pts_col">
                  <p class="points" *ngIf="challenge.TotPts">{{challenge.TotPts}} Pts</p>
                </ion-col>
                <ion-col *ngIf="challenge.Id" col-12>
                  <div *ngFor="let item of getChallengeId(challenge.Id)">
                    <p class="focus_target">{{item}}</p>
                    <!-- <p class="focus_target">{{item.FocusAreaName}}</p> -->
                    <!-- <p class="focus_target">{{item.TargetAreaName}}</p> -->
                  </div>

                </ion-col>
              </ion-row>
            </ion-card-content>
          </ion-card>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="!isChallangesAvail" class="not_found">
      <ion-col col-12 text-center>
        <p>No challenges found</p>
      </ion-col>
    </ion-row>
  </div>

  <div *ngIf="!selectedType">
    <ion-row class="sub-container rows-allign2">
      <ion-col col-1 style="text-align:center;margin:auto;padding:0px">
        <ion-icon name="ios-search"></ion-icon>
      </ion-col>
      <ion-col col-11 class="search-bar">
        <ion-searchbar placeholder="Search Templates" id="customsearchbar" (ionInput)="FilterTemplates($event)"
          autocorrect="off"></ion-searchbar>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-12>
        <ion-list>
          <ion-card class="facilityCard seession-cards" style="border-radius:0px !important;"
            *ngFor="let template of Templates;let i=index">
            <ion-card-content (click)="showActions('template',template)">
              <ion-row>
                <ion-col col-8>
                  <p class="p1 age">{{template.AgeGroupStart}} - {{template.AgeGroupEnd}} Years</p>
                  <p class="p1">{{template.TemplateName}}</p>
                  <!-- <p class="paidmembercount">Level: {{challenge.Levels.length}}</p> -->
                </ion-col>
                <ion-col col-4 class="pts_col">
                  <p class="points" *ngIf="template.TotPts">{{template.TotPts}} Pts</p>
                  <p class="challenge_len">Challenges: {{template.Challenge.length}}</p>
                </ion-col>
              </ion-row>
            </ion-card-content>
          </ion-card>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="!isTemplatesAvail" class="not_found">
      <ion-col col-12 text-center>
        <p>No templates found</p>
      </ion-col>
    </ion-row>
  </div>
</ion-content>

<ion-fab right bottom *ngIf="!selectedType" (tap)="createTemplate()" class="trash_icon">
  <button ion-fab mini><ion-icon name="add"></ion-icon></button>
</ion-fab>

<ion-fab right bottom *ngIf="selectedType" (tap)="createChallenge()" class="trash_icon">
  <button ion-fab mini><ion-icon name="add"></ion-icon></button>
</ion-fab>

<!-- <ion-fab left bottom class="trash_icon" (tap)="refreshList()">
  <button ion-fab mini><ion-icon name="md-sync" ></ion-icon></button>
</ion-fab> -->