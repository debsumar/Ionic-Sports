<ion-header>

    <ion-navbar *ngIf="themeType == 2">
        <button ion-button icon-only menuToggle (click)="goToDashboardMenuPage()">
            <ion-icon name="apps"></ion-icon>
        </button>
        <ion-title>
            {{LangObj.member_Member}}
        </ion-title>
        <ion-buttons end>
            <button ion-button icon-only (click)="goToDashboardMenuPage()">
                 <img src="assets/images/home.svg" class="home_btn">
            </button>
            <button ion-button icon-only (click)="presentPopover($event)">
                <ion-icon name="more"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
   
    <!-- <ion-searchbar id="customsearchbar" class="sbar" [showCancelButton]="shouldShowCancel" (ionInput)="getFilterItems($event)"
        autocorrect="off" placeholder="Search by name"></ion-searchbar> -->

        <!--<ion-toolbar no-border-top no-border>
                <ion-segment [(ngModel)]="memberType">
                    <ion-segment-button value="Member" (click)="memberTabClick()">
                        {{LangObj.member_Member}}
                    </ion-segment-button>
                    <ion-segment-button value="Holidaycampmember" (click)="memberTabClick()">
                        {{LangObj.member_hildycamp}}
                    </ion-segment-button>
                    <ion-segment-button value="Schoolmember" (click)="memberTabClick()">
                        {{LangObj.member_scl}}
                    </ion-segment-button>
                </ion-segment>
        </ion-toolbar> -->
</ion-header>


<ion-content class="member-content">
    <!-- Modern Search Card -->
    <div class="modern-search-card">
        <div class="search-header">
            <div class="search-icon">
                <ion-icon name="search"></ion-icon>
            </div>
            <div class="search-label">Search Members</div>
        </div>
        <div class="search-wrapper">
            <ion-searchbar class="sleek-searchbar" placeholder="Search by name, phone, email" [(ngModel)]="searchText" (ionInput)="getFilterItems($event)" autocorrect="off"></ion-searchbar>
        </div>
    </div>

    <!-- Modern Filters Container -->
    <div class="modern-filters-container">
        <!-- Club Filter -->
        <div class="modern-dropdown-card club-filter">
            <div class="dropdown-header">
                <div class="dropdown-icon">
                    <ion-icon name="business"></ion-icon>
                </div>
                <div class="dropdown-label">Club</div>
            </div>
            <div class="dropdown-wrapper">
                <ion-select class="modern-select" [(ngModel)]="selectedClubKey" (ionChange)="venueSelected()">
                    <ion-option *ngFor="let club of clubs" [value]="club.Id">{{club.ClubName}}</ion-option>
                </ion-select>
                <div class="dropdown-arrow">
                    <ion-icon name="arrow-down"></ion-icon>
                </div>
            </div>
        </div>

        <!-- Member Type Filter -->
        <div class="modern-dropdown-card member-filter">
            <div class="dropdown-header">
                <div class="dropdown-icon">
                    <ion-icon name="people"></ion-icon>
                </div>
                <div class="dropdown-label">Type</div>
            </div>
            <div class="dropdown-wrapper">
                <ion-select class="modern-select" [(ngModel)]="memberType" (ionChange)="memberTabClick()">
                    <ion-option value="Member">Members</ion-option>
                    <ion-option value="Holidaycampmember">Holiday Camp</ion-option>
                    <ion-option value="Schoolmember">School</ion-option>
                </ion-select>
                <div class="dropdown-arrow">
                    <ion-icon name="arrow-down"></ion-icon>
                </div>
            </div>
        </div>
    </div>

    <div [ngSwitch]="memberType">
        <ion-list *ngSwitchCase="'Member'">
            <!-- <ion-item class="venueionitem">
                
                <ion-select [(ngModel)]="selectedClubKey" (ionChange)="venueSelected(selectedClubKey)" class="venuedropdown">
                    <ion-option *ngFor="let club of clubs" value={{club.$key}}>{{club.ClubName}}</ion-option>

                </ion-select>
                
            </ion-item> -->
 

            <!-- <div *ngFor="let member of members;let i = index">
                <ion-card class="cardStyle" *ngIf="!member.IsChild" (click)="presentActionSheet(member,i,'Member')"  [class.selected]="false === member.IsEnable">
                    <ion-card-content >
                        <p class="memberfont">
                             <ion-icon name="ios-person-outline"></ion-icon>  -->
            <!-- {{member.FirstName}} {{member.MiddleName}} {{member.LastName}} &nbsp;( +{{member.ChildMember.length}} )
                        </p>
                        <span>
                            <ion-icon name="ios-call-outline"></ion-icon> {{member.PhoneNumber}}</span>
                        <p>
                            <ion-icon name="ios-mail-outline"></ion-icon> {{member.EmailID}}</p>
                    </ion-card-content>
                </ion-card>
                <div *ngIf="this.selectedIndex == i" class="f_member">

                    <ion-card *ngFor="let fm of member.ChildMember">
                        <ion-card-content>
                            <ion-col col-12> {{fm.FirstName}} {{fm.LastName}}</ion-col>
                        </ion-card-content>
                    </ion-card>

                    <ion-card class="ion_card" *ngIf="member.ChildMember.length ==0">
                        <ion-card-content>
                            <p class="danger_color2">No family member added.</p>
                        </ion-card-content>
                    </ion-card>
                </div> -->
            <!-- </div> -->


            <!-- <ion-card class="ion_card nomemberMessageCard">
                <ion-card-content>
                    <p class="danger_color2"></p>
                </ion-card-content>
            </ion-card> -->
            <ion-card  *ngIf="members.length ==0"  class="add-court">
                <ion-card-content>
                    <p  class="no">
                            {{LangObj.member_no_mem_found}}
                    </p>
                </ion-card-content>
            </ion-card>

            <div class="member-container">
                <div class="modern-member-card" *ngFor="let member of members;let i = index" (click)="presentActionSheet(member,i,'Member')" [class.inactive]="!member.is_enable">
                    <div class="card-header">
                        <div class="member-avatar">
                            <ion-icon name="person"></ion-icon>
                        </div>
                        <div class="member-info">
                            <div class="member-name">{{member.parent_firstname}} {{member.parent_lastname}}</div>
                            <div class="member-status" *ngIf="!member.is_enable">Inactive Member</div>
                        </div>
                        <div class="member-badge" *ngIf="member.childcount > 0">
                            <span class="family-count">+{{member.childcount}}</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="contact-row">
                            <div class="contact-item">
                                <ion-icon name="call" class="contact-icon"></ion-icon>
                                <span class="contact-text">{{member.phone_number}}</span>
                            </div>
                        </div>
                        <div class="contact-row">
                            <div class="contact-item">
                                <ion-icon name="mail" class="contact-icon"></ion-icon>
                                <span class="contact-text">{{member.email}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </ion-list>









        <ion-list *ngSwitchCase="'Holidaycampmember'">
            <!-- <div *ngFor="let member of holidayCampMembers;let i = index">
                <ion-card class="cardStyle" *ngIf="!member.IsChild" (click)="presentActionSheetForHolidayCampMember(member,i,'Holidaycampmember')" [class.selected]="false === member.IsEnable">
                    <ion-card-content > -->
            <!-- <p>
                            <ion-icon name="ios-person-outline"></ion-icon> {{member.FirstName}} {{member.MiddleName}} {{member.LastName}} &nbsp;( +{{member.ChildMember.length}}
                            )
                        </p> -->
            <!-- <p class="memberfont"> -->
            <!-- <ion-icon name="ios-person-outline"></ion-icon>  -->
            <!-- {{member.FirstName}} {{member.MiddleName}} {{member.LastName}} &nbsp;( +{{member.ChildMember.length}} )
                        </p>
                        <span>
                            <ion-icon name="ios-call-outline"></ion-icon> {{member.PhoneNumber}}</span>
                        <p>
                            <ion-icon name="ios-mail-outline"></ion-icon> c</p>
                    </ion-card-content>
                </ion-card>
                <div *ngIf="this.selectedIndexOfHolidayCampMember == i" class="f_member">

                    <ion-card *ngFor="let fm of member.ChildMember">
                        <ion-card-content [class.selected]="false === member.IsEnable">
                            <ion-col col-12> {{fm.FirstName}} {{fm.LastName}}</ion-col>
                        </ion-card-content>
                    </ion-card>

                    <ion-card class="ion_card" *ngIf="member.ChildMember.length ==0">
                        <ion-card-content>
                            <p class="danger_color2">No family member added.</p>
                        </ion-card-content>
                    </ion-card>
                </div>
            </div> -->

            <ion-row *ngFor="let member of holidayCampMembers;let i = index" style="margin-top: -12px;" class="rows-allign">
                <ion-col col-1>
                        <div  [class.selected]="false === member.IsEnable" class="all border-left-style"></div>
                </ion-col>
                <ion-col col-11 class="allignment-col">
                    <ion-card  *ngIf="!member.IsChild" (click)="presentActionSheetForHolidayCampMember(member,i,'Holidaycampmember')"
                        [class.selected]="false === member.IsEnable">
                        <ion-card-header>
                            <ion-row>
                                <ion-col col-10>
                                        <span class="name"> {{member.FirstName}} {{member.MiddleName}} {{member.LastName}}</span>
                                </ion-col>
                                <ion-col col-2>
                                    <span class="family" *ngIf="member.ChildMember.length != 0">+{{member.MemberCount}}</span>
                                </ion-col>
                            </ion-row>
                        </ion-card-header>
                        <ion-card-content style="color: #c5b495">
                            <ion-row>
                                <ion-col col-2>
                                    <img src="assets/imgs/phone.svg" class="icon-img">
                                </ion-col>
                                <ion-col col-10>
                                    {{member.PhoneNumber}}
                                </ion-col>
                            </ion-row>
                            <ion-row>
                                <ion-col col-2>
                                    <img src="assets/imgs/message.svg" class="icon-img">
                                </ion-col>
                                <ion-col col-10>
                                    {{member.EmailID}}
                                </ion-col>
                            </ion-row>
                        </ion-card-content>

                    </ion-card>
                </ion-col>
            </ion-row>










        </ion-list>
        <ion-list *ngSwitchCase="'Schoolmember'">

            <!-- <div *ngFor="let member of schoolMemberList;let i = index">
                <ion-card class="cardStyle" *ngIf="!member.IsChild" (click)="presentActionSheetForSchoolMember(member,i,'Schoolmember')" [class.selected]="false === member.IsEnable">
                    <ion-card-content> -->
            <!-- <p>
                            <ion-icon name="ios-person-outline"></ion-icon> {{member.FirstName}} {{member.MiddleName}} {{member.LastName}} &nbsp;( +{{member.ChildMember.length}}
                            )
                        </p> -->
            <!-- <p class="memberfont"> -->
            <!-- <ion-icon name="ios-person-outline"></ion-icon>  -->
            <!-- {{member.FirstName}} {{member.MiddleName}} {{member.LastName}} &nbsp;( +{{member.ChildMember.length}} )
                        </p>
                        <span>
                            <ion-icon name="ios-call-outline"></ion-icon> {{member.PhoneNumber}}</span>
                        <p>
                            <ion-icon name="ios-mail-outline"></ion-icon> {{member.EmailID}}</p>
                    </ion-card-content>
                </ion-card>
                <div *ngIf="this.selectedSchoolMemberIndex == i" class="f_member">

                    <ion-card *ngFor="let fm of member.ChildMember">
                        <ion-card-content>
                            <ion-col col-12> {{fm.FirstName}} {{fm.LastName}}</ion-col>
                        </ion-card-content>
                    </ion-card>

                    <ion-card class="ion_card" *ngIf="member.ChildMember.length ==0">
                        <ion-card-content>
                            <p class="danger_color2">No family member added.</p>
                        </ion-card-content>
                    </ion-card>
                </div>
            </div> -->





            <ion-row *ngFor="let member of schoolMemberList;let i = index" style="margin-top: -12px;" class="rows-allign">
                <ion-col col-1>
                        <div [ngClass]="{
                            'selected': member.IsEnable,
                            'all': member.IsEnable
                            }" class="border-left-style"></div>
                </ion-col>
                <ion-col col-11 class="allignment-col">
                    <ion-card *ngIf="!member.IsChild" (click)="presentActionSheetForSchoolMember(member,i,'Schoolmember')">
                        <ion-card-header>
                            <ion-row>
                                <ion-col col-10>
                                   <span class="name"> {{member.FirstName}} {{member.MiddleName}} {{member.LastName}}</span>
                                </ion-col>
                                <ion-col col-2>
                                    <span class="family" *ngIf="member.ChildMember.length != 0">+{{member.MemberCount}}</span>
                                </ion-col>
                            </ion-row>
                        </ion-card-header>
                        <ion-card-content style="color:#c5b495">
                            <ion-row>
                                <ion-col col-2>
                                    <img src="assets/imgs/phone.svg" class="icon-img">
                                </ion-col>
                                <ion-col col-10>
                                    {{member.PhoneNumber}}
                                </ion-col>
                            </ion-row>
                            <ion-row>
                                <ion-col col-2>
                                    <img src="assets/imgs/message.svg" class="icon-img">
                                </ion-col>
                                <ion-col col-10>
                                    {{member.EmailID}}
                                </ion-col>
                            </ion-row>
                        </ion-card-content>

                    </ion-card>
                </ion-col>
            </ion-row>

        </ion-list>
    </div>
    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content loadingSpinner="crescent" loadingText="Loading more data..."></ion-infinite-scroll-content>
    </ion-infinite-scroll>
    <!-- <ion-fab right bottom (click)="addMember()" *ngIf="memberType != 'Schoolmember'">
        <button ion-fab mini style="background-color:#2b92bb !important; color: white !important">
            <ion-icon name="add"></ion-icon>
        </button>
    </ion-fab> -->






    <!-- style="margin-top: -32px;"  -->
    <ion-fab mini right bottom #fab>
        <!-- <p *ngIf="isShowNewPost" class="newPost">New Post</p> -->
        <button ion-fab mini style='background-color: #2b92bb;' (click)="showNewPost()">
            <ion-icon name="add"></ion-icon>
        </button>
        <ion-fab-list side="top">

            <p class="fabEmailText" (tap)="addMember()">{{LangObj.member_create}}</p>
            <button  ion-fab style='background-color: #2b92bb; color:white' class="fabTop" (tap)="addMember()">
                <ion-icon name="md-person-add"></ion-icon>
            </button>
            <p class="fabEmailText" (tap)="gotoSendEmailPage(1)">{{LangObj.member_email}}</p>
            <button  ion-fab style='background-color: #2b92bb;  color:white' class="fabTop" (tap)="gotoSendEmailPage(1)">
                <ion-icon name="md-mail"></ion-icon>
            </button>

            <p class="fabAttendanceText" (tap)="gotoSendNotification(0)">{{LangObj.member_notifification}}</p>
            <button  ion-fab  style='background-color: #2b92bb;  color:white' class="fabTop" (tap)="gotoSendNotification(0)">
                <ion-icon name="md-notifications"></ion-icon>
            </button>


        </ion-fab-list>

    </ion-fab>















    <!-- Custom modal -->
    <!-- The Modal -->
    <div id="customModal1" class="modal" (click)="closeModal()">

        <!-- Modal content -->
        <div class="modal-content">
            <!-- <span class="close">&times;</span> -->

            <ion-item>
                <!-- <ion-label>Member</ion-label> -->
                <ion-select [(ngModel)]="selectedClub" style="padding: 13px 8px 13px 2px;">
                    <ion-option *ngFor="let club of clubs" value={{club.$key}}>{{club.ClubName}}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item class="comments">
                <ion-label floating>{{LangObj.member_comments}}({{LangObj.member_optional}})</ion-label>
                <ion-textarea type="text"></ion-textarea>
            </ion-item>
            <ion-grid>
                <ion-row>
                    <ion-col col-6>
                        <button ion-button block style="background-color:#2b92bb !important; color: white !important" (click)="cancelModal()">{{LangObj.member_cancel}}</button>
                    </ion-col>
                    <ion-col col-6>
                        <button ion-button block class="timekare-primary-btn" (click)="migrateMember()">{{LangObj.member_save}}</button>
                    </ion-col>

                </ion-row>
            </ion-grid>
        </div>

    </div>










</ion-content>

<!-- Modern Footer -->
<ion-footer>
    <div class="modern-footer">
        <div class="footer-stats">
            <div class="stat-item">
                <div class="stat-value">{{members.length}}</div>
                <div class="stat-label">Total</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">{{activeMembers}}</div>
                <div class="stat-label">Active</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">{{inactiveMembers}}</div>
                <div class="stat-label">Inactive</div>
            </div>
        </div>
        <div class="footer-actions">
            <button ion-button icon-only class="footer-btn" (click)="addMember()">
                <ion-icon name="person-add"></ion-icon>
            </button>
            <button ion-button icon-only class="footer-btn" (click)="gotoSendEmailPage(1)">
                <ion-icon name="mail"></ion-icon>
            </button>
            <button ion-button icon-only class="footer-btn" (click)="gotoSendNotification(0)">
                <ion-icon name="notifications"></ion-icon>
            </button>
        </div>
    </div>
</ion-footer>